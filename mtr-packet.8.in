.TH MTR-PACKET 8 "@VERSION@" "mtr-packet" "System Administration"
.SH NAME
mtr-packet - send and receive network probes
.SH DESCRIPTION
.B mtr-packet
reads command requests from
.I stdin,
each separated by a newline character, and responds with command replies
to
.I stdout\c
, also each separated by a newline character.  The syntactic structure of
requests and replies are the same.  The following format is used:
.LP
.RS
.I TOKEN
.I COMMAND
[\c
.I ARGUMENT-NAME
.I ARGUMENT-VALUE
\&...]
.RE
.LP
.I TOKEN
is a unique integer value.  The same value will be used as the
.I TOKEN
for the response.  This is necessary for associating replies with
requests, as commands may be completed in a different order than they are
requested.  The invoker of
.B mtr-packet
should always use the
.I TOKEN
value to determine which command request has completed.
.LP
.I COMMAND
is a string identifying the command request type.  A common command 
is
.B send-probe\c
, which will transmit one network probe.
.LP
.I ARGUMENT-NAME
strings and 
.I ARGUMENT-VALUE
strings always come in pairs.  It is a syntactic error to provide an
.I ARGUMENT-NAME
without a corresponding
.I ARGUMENT-VALUE\c
\&.  Valid
.I ARGUMENT-NAME
strings depend on the
.I COMMAND
being used.
.SH REQUESTS
.TP
.B send-probe
Send a network probe to a particular IP address.  An IP address must
be provided as an argument.  
.B send-probe
will reply with
.B reply\c
, 
.B no-reply\c
, or
.B ttl-expired\c
\&.

The following arguments may be used:

.B ip-4
.I IP-ADDRESS

The Internet Protocol version 4 address to probe.

.B timeout
.I TIMEOUT-SECONDS

The number of seconds to wait for a response to the probe before 
discarding the probe as lost, and generating a 
.B no-reply
command reply.

.B ttl
.I TIME-TO-LIVE

The time-to-live value for the Internet Protocol packet header used
in constructing the probe.  This value determines the number of 
network hops through which the probe will travel before a response
is generated by an intermediate network host.

.TP
.B check-support
Check for support for a particular feature in this version of
.B mtr-packet
and in this particular operating environment.
.B check-support
will reply with
.B feature-supported\c
\&.  A
.B feature
argument is required.

.B feature
.I FEATURE-NAME

The name of a feature requested.  Some features which can be checked
are
.B send-probe
and
.B ip-4\c
\&.  The feature
.B version
can be checked to retrieve the version of
.B mtr-packet\c
\&.

.SH REPLIES
.TP
.B reply
The destination host received the 
.B send-probe
probe and replied.  Arguments of the reply are the following:

.B ip-4
.I IP-ADDRESS

The Internet Protocol address of the host which replied to the
probe.

.B round-trip-time
.I TIME

The time which passed between the transmission of the probe and its 
response.  The time is provided as a integral number of
microseconds elapsed.

.TP
.B no-reply
No response to the probe request was received before the timeout
expired.
.TP
.B ttl-expired
The time-to-live value of the transmitted probe expired before
the probe arrived at its intended destination.  Arguments of
.B ttl-expired
are:

.B ip-4
.I IP-ADDRESS

The Internet Protocol address of the host at which the time-to-live
value expired.

.B round-trip-time
.I TIME

The time which passed between the transmission of the probe and its 
response.  The time is provided as a integral number of
microseconds elapsed.

.TP
.B feature-support
A reply to provided to
.B check-support
indicating the availability of a particular feature.  The argument
provided is:

.B support
.I PRESENT

In most cases, the 
.I PRESENT
value will be either
.B ok\c
, indicating the feature is supported, or 
.B no\c
, indicating no support for the feature.

In the case that
.B version
is the requested
.I FEATURE-NAME\c
, the version of
.B mtr-packet
is provided as the
.I PRESENT
value.

.SH EXAMPLE
A controlling program may start
.B mtr-packet
as a child process and issue the following command on
.I stdin\c
:
.LP
.RS
42 send-probe ip-4 127.0.0.1
.RE
.LP
This will send a network probe to the loopback interface.  When the probe
completes,
.B
mtr-packet
will provide a response on
.I stdout
such as the following:
.LP
.RS
42 reply ip-4 127.0.0.1 round-trip-time 126
.RE
.LP
This indicates that the loopback address replied to the probe, and the
round-trip time of the probe was 126 microseconds.
.SH CONTACT INFORMATION
.PP
For the latest version, see the mtr web page at 
.UR http://\:www.\:bitwizard.\:nl/\:mtr/
.UE
.PP
The mtr mailinglist was little used and is no longer active. 
.PP
For patches, bug reports, or feature requests, please open an issue on
GitHub at:
.UR https://\:github\:.com/\:traviscross/\:mtr
.UE .
.SH "SEE ALSO"
.BR mtr (8),
TCP/IP Illustrated (Stevens, ISBN 0201633469).
